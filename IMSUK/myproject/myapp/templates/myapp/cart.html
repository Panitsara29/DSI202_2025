{% extends 'myapp/base.html' %}
{% load custom_filters %}

{% block title %}‡∏£‡∏ñ‡πÄ‡∏Ç‡πá‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì | IMSUK{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto px-4 py-12">
  {% if cart_items %}
  <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
    <!-- üõí ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ -->
    <div class="lg:col-span-2 bg-white rounded-2xl shadow-xl overflow-hidden">
      <div class="border-b px-6 py-4">
        <h2 class="text-2xl font-bold text-[#ff6e7e] flex items-center gap-2">
          <i class="fi fi-rr-shopping-cart"></i> ‡∏£‡∏ñ‡πÄ‡∏Ç‡πá‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
        </h2>
      </div>
      <div class="divide-y">
        {% for item in cart_items %}
        <div class="flex items-center gap-4 px-6 py-4">
          <!-- ‡∏£‡∏π‡∏õ -->
          <div class="w-16 h-16 flex-shrink-0">
            {% if item.menu_item.image %}
            <img src="{{ item.menu_item.image.url }}" alt="{{ item.menu_item.name }}" class="w-full h-full object-cover rounded-xl">
            {% else %}
            <div class="w-full h-full bg-gray-100 flex items-center justify-center text-xs text-gray-400">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏π‡∏õ</div>
            {% endif %}
          </div>

          <!-- ‡∏ä‡∏∑‡πà‡∏≠ & ‡∏£‡∏≤‡∏Ñ‡∏≤ -->
          <div class="flex-1">
            <h3 class="text-sm font-semibold text-gray-800">{{ item.menu_item.name }}</h3>
            <div class="text-xs text-gray-500 mt-1">‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏ä‡∏¥‡πâ‡∏ô: ‡∏ø{{ item.menu_item.price|floatformat:2 }}</div>
            <div class="text-xs text-gray-500">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô: {{ item.quantity }}</div>
          </div>

          <!-- ‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏¢‡πà‡∏≠‡∏¢ -->
          <div class="text-sm font-semibold text-gray-800">‡∏ø{{ item.menu_item.price|mul:item.quantity|floatformat:2 }}</div>

          <!-- ‡∏•‡∏ö -->
          <form action="{% url 'remove_from_cart' item.id %}" method="post">
            {% csrf_token %}
            <button type="submit" class="text-gray-400 hover:text-red-500 ml-4">
              <i class="fi fi-rr-trash"></i>
            </button>
          </form>
        </div>
        {% endfor %}
      </div>
    </div>

    <!-- üí≥ ‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î -->
    <div class="bg-white rounded-2xl shadow-xl p-6 flex flex-col justify-between">
      <div>
        <h3 class="text-lg font-bold text-gray-800 mb-4">‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
        <div class="space-y-2 text-sm text-gray-600">
          <div class="flex justify-between">
            <span>‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°</span>
            <span>‡∏ø{{ total_price|floatformat:2 }}</span>
          </div>
          <div class="flex justify-between">
            <span>‡∏Ñ‡πà‡∏≤‡∏à‡∏±‡∏î‡∏™‡πà‡∏á</span>
            <span class="text-green-500 font-medium">‡∏ü‡∏£‡∏µ</span>
          </div>
        </div>
        <hr class="my-4">
        <div class="flex justify-between text-lg font-bold">
          <span>‡∏¢‡∏≠‡∏î‡∏™‡∏∏‡∏ó‡∏ò‡∏¥</span>
          <span class="text-[#ff6e7e]">‡∏ø{{ total_price|floatformat:2 }}</span>
        </div>
      </div>

      <a href="{% url 'checkout' %}" class="mt-6 inline-block w-full text-center bg-[#ff6e7e] hover:bg-[#ffa7a9] text-white font-semibold py-3 rounded-full transition">
        <i class="fi fi-rr-receipt text-base mr-2"></i> ‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô
      </a>
    </div>
  </div>
  {% else %}
  <!-- ‡∏£‡∏ñ‡πÄ‡∏Ç‡πá‡∏ô‡∏ß‡πà‡∏≤‡∏á -->
  <div class="text-center py-20 text-gray-600">
    <i class="fi fi-rr-shopping-bag text-6xl text-gray-300 mb-4"></i>
    <p class="text-xl font-medium mb-2">‡∏£‡∏ñ‡πÄ‡∏Ç‡πá‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏õ‡∏•‡πà‡∏≤‡πÉ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ</p>
    <a href="{% url 'menu_list' %}" class="inline-block mt-4 text-[#ff6e7e] hover:underline font-semibold text-base">
      ‚Üê ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£
    </a>
  </div>
  {% endif %}
</div>
{% endblock %}
